# Microphone priority configuration
# Automatically switch to USB Condenser Microphone when connected
# Falls back to built-in microphone when disconnected

monitor.alsa.rules = [
  {
    matches = [
      {
        # USB Condenser Microphone - highest priority
        node.name = "~alsa_input.usb-DCMT_Technology_USB_Condenser_Microphone.*"
      }
    ]
    actions = {
      update-props = {
        # High priority to make this the default when connected
        priority.driver = 1000
        priority.session = 1000
      }
    }
  }
  {
    matches = [
      {
        # Built-in microphone - lower priority (fallback)
        node.name = "~alsa_input.pci-.*"
        api.alsa.pcm.stream = "capture"
      }
    ]
    actions = {
      update-props = {
        # Default priority for built-in devices
        priority.driver = 100
        priority.session = 100
      }
    }
  }
]
